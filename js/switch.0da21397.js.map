{"version":3,"sources":["webpack:///./src/components/Menu.vue?2831","webpack:///./src/views/Switch.vue?c4a2","webpack:///./src/components/Menu.vue?be05","webpack:///./src/services/SparqlApiService.ts","webpack:///./src/components/Menu.vue","webpack:///./src/components/Menu.vue?e357","webpack:///./src/views/Switch.vue","webpack:///./src/views/Switch.vue?3189"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_Menu","_resolveComponent","_openBlock","_createElementBlock","_createVNode","panel_fmid","data","url_pathTop","_withScopeId","n","_pushScopeId","_popScopeId","key","_hoisted_2","id","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_createElementVNode","_Fragment","panel_name","_toDisplayString","_renderList","treedata","sw","_normalizeClass","active","onClick","$event","dropdown","sw_name","bottom_objs","obj","href","obj_url","label","obj_name","_createCommentVNode","error","title","message","item","style","_createTextVNode","async","getSparql","baseUrl","settings","sparqlUrl","query","url","encodeURIComponent","response","axios","get","resData","results","bindings","forEach","value","push","ENDOBJ_NM","ENDOBJ_SCAN","ex","defineComponent","name","props","String","setup","reactive","list","then","sparqlData","Object","keys","dataException","notFound","__exports__","components","Menu","route","useRoute","params","fmid"],"mappings":"0GAAA,W,gFCEA,MAAMA,EAAa,CAAEC,MAAO,UAEtB,SAAUC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAMC,EAAkBC,eAAkB,QAE1C,OAAQC,iBAAcC,eAAoB,MAAOZ,EAAY,CAC3Da,eAAaJ,EAAiB,CAC5BK,WAAYX,EAAKY,KAAKD,WACtBE,YAAab,EAAKY,KAAKC,aACtB,KAAM,EAAG,CAAC,aAAc,kBCT/B,MAAMC,EAAeC,IAAMC,eAAa,mBAAmBD,EAAEA,IAAIE,iBAAcF,GACzElB,EAAa,CACjBqB,IAAK,EACLpB,MAAO,QAEHqB,EAAa,CAAEC,GAAI,OACnBC,EAAa,CAAEvB,MAAO,QACtBwB,EAAa,CAAC,WACdC,EAAa,CAAEL,IAAK,GACpBM,EAAa,CAAC,OAAQ,SACtBC,EAAa,CACjBP,IAAK,EACLpB,MAAO,SAEH4B,EAAa,CAAER,IAAK,GACpBS,EAA2Bb,EAAa,IAAmBc,eAAoB,KAAM,KAAM,MAAO,IAElG,SAAU7B,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,OAAQG,iBAAcC,eAAoBoB,OAAW,KAAM,CACxD7B,EAAKY,KAAKkB,YACNtB,iBAAcC,eAAoB,MAAOZ,EAAY,CACpD+B,eAAoB,KAAM,KAAMG,eAAiB/B,EAAKY,KAAKkB,YAAa,GACxEF,eAAoB,MAAOT,EAAY,CACrCS,eAAoB,KAAMP,EAAY,EACnCb,gBAAW,GAAOC,eAAoBoB,OAAW,KAAMG,eAAYhC,EAAKY,KAAKqB,SAAWC,IAC/E1B,iBAAcC,eAAoB,KAAM,CAC9CS,IAAKgB,EAAGd,GACRtB,MAAO,aACN,CACD8B,eAAoB,IAAK,CACvB9B,MAAOqC,eAAgB,CAACC,OAAOpC,EAAKY,KAAKwB,SAASF,IAClDG,QAAUC,GAAiBtC,EAAKuC,SAASL,EAAGM,UAC3CT,eAAiBG,EAAGM,SAAU,GAAIlB,GACpCtB,EAAKY,KAAKwB,SAASF,EAAGM,SAClBhC,iBAAcC,eAAoB,KAAMc,EAAY,EAClDf,gBAAW,GAAOC,eAAoBoB,OAAW,KAAMG,eAAYE,EAAGO,YAAcC,IAC3ElC,iBAAcC,eAAoB,KAAM,CAC9CS,IAAKwB,EAAItB,GACTtB,MAAO,gBACN,CACD8B,eAAoB,IAAK,CACvBe,KAAMD,EAAIE,QACVC,MAAOH,EAAII,UACVf,eAAiBW,EAAII,UAAW,EAAGtB,OAEtC,SAENuB,eAAoB,IAAI,OAE5B,aAIVA,eAAoB,IAAI,GAC3B/C,EAAKY,KAAKoC,MAAMC,OACZzC,iBAAcC,eAAoB,MAAOgB,EAAY,CACnDzB,EAAKY,KAAKoC,MAAMC,OACZzC,iBAAcC,eAAoB,KAAMiB,EAAYK,eAAiB/B,EAAKY,KAAKoC,MAAMC,OAAQ,IAC9FF,eAAoB,IAAI,IAC3BvC,gBAAW,GAAOC,eAAoBoB,OAAW,KAAMG,eAAYhC,EAAKY,KAAKoC,MAAME,QAAUC,IACpF3C,iBAAcC,eAAoB,MAAO,CAC/C2C,MAAO,CAAC,aAAa,QACrBlC,IAAKiC,GACJ,CACDE,eAAiBtB,eAAiBoB,GAAO,GACzCxB,MAEA,SAENoB,eAAoB,IAAI,IAC3B,I,sCCnEEO,eAAeC,EAAU5C,GAC5B,IAEI,MAAM6C,EAAUC,EAASC,UAEnBC,EAAQ,qdAOqIhD,67BAmB7IiD,EAAMJ,EAAU,UAAYK,mBAAmBF,GAG/CG,QAAiBC,OAAMC,IAAIJ,GAG3BK,EAAiB,GACvB,IAAInC,EAAa,GAYjB,OAXAgC,EAASlD,KAAKsD,QAAQC,SAASC,QAASC,IAChCvC,IACAA,EAAauC,EAAM,YAAY,UAG9BA,EAAM,UAAU,WAAYJ,IAC7BA,EAAQI,EAAM,UAAU,UAAY,IAExCJ,EAAQI,EAAM,UAAU,UAAUC,KAAK,CAACC,UAAWF,EAAM,aAAa,SAAUG,YAAaH,EAAM,eAAe,aAG/G,CAACvC,EAAYmC,EAAS,IAC/B,MAAOQ,GACL,MAAO,CAAC,QAAS,GAAIA,IChDdC,qBAAgB,CAC7BC,KAAM,OACNC,MAAO,CACLjE,WAAYkE,OACZhE,YAAagE,QAEfC,MAAMF,GACJ,MAAMhE,EAAOmE,eAAS,CACpBjD,WAAW,GACXG,SAAS,CAAC,IACVG,OAAO,GACPY,MAAO,CACLC,MAAM,GACNC,QAAQ,MAuDZ,SAASX,EAASyC,GACdpE,EAAKwB,OAASxB,EAAKwB,SAAS4C,EAAO,GAAGA,EAG1C,OAtDAzB,EAAWqB,EAAMjE,YAAuBsE,KAAK,EAAEnD,EAAYoD,EAAYT,MACrE,GAAI3C,GAA4B,UAAdA,EAAuB,CACvClB,EAAKkB,WAAaA,EAGlB,MAAMG,EAA0D,GAGhEkD,OAAOC,KAAKF,GAAYd,QAASlD,IAC/B,MAAMuB,EAA2B,GACjCyC,EAAWhE,GAAKkD,QAASC,IACvB5B,EAAY6B,KACV,CACExB,SAAUuB,EAAM,aAChBzB,QAASyB,EAAM,mBAKrBpC,EAASqC,KACP,CACE9B,QAAStB,EACTuB,YAAaA,MAKnB7B,EAAKqB,SAAWA,OACNH,GASVlB,EAAKoC,MAAMC,MAAQQ,EAAS4B,cAAcpC,MAC1CQ,EAAS4B,cAAcnC,QAAQkB,QAASC,IACtCzD,EAAKoC,MAAME,QAAQoB,KAAKD,KAE1BzD,EAAKoC,MAAME,QAAQoB,KAAK,gBACxB1D,EAAKoC,MAAME,QAAQoB,KAAK,cAAcM,EAAM/D,aAC5CD,EAAKoC,MAAME,QAAQoB,KAAK,SAASM,EAAMjE,YACvCC,EAAKoC,MAAME,QAAQoB,KAAK,OAAOG,KAf/B7D,EAAKoC,MAAMC,MAAQQ,EAAS6B,SAASrC,MACrCQ,EAAS6B,SAASpC,QAAQkB,QAASC,IACjCzD,EAAKoC,MAAME,QAAQoB,KAAKD,KAE1BzD,EAAKoC,MAAME,QAAQoB,KAAK,gBACxB1D,EAAKoC,MAAME,QAAQoB,KAAK,cAAcM,EAAM/D,aAC5CD,EAAKoC,MAAME,QAAQoB,KAAK,SAASM,EAAMjE,eAmBrC,CACJC,OACA2B,e,iCC5EN,MAAMgD,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E,Q,YCJAb,iBAAgB,CAC7BC,KAAM,SACNa,WAAY,CACVC,QAEFX,QAEE,MAAMlE,EAAOmE,eAAS,CACpBpE,WAAW,GACXE,YAAY,KAQR6E,EAAQC,iBAId,OAHA/E,EAAKD,WAAc+E,EAAME,OAAOC,KAChCjF,EAAKC,YAAc,SAEb,CACJD,WCtBN,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASb,KAErD","file":"js/switch.0da21397.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Menu.vue?vue&type=style&index=0&id=1c4d59ea&scoped=true&lang=css\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"switch\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Menu = _resolveComponent(\"Menu\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_Menu, {\n      panel_fmid: _ctx.data.panel_fmid,\n      url_pathTop: _ctx.data.url_pathTop\n    }, null, 8, [\"panel_fmid\", \"url_pathTop\"])\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1c4d59ea\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"menu\"\n}\nconst _hoisted_2 = { id: \"app\" }\nconst _hoisted_3 = { class: \"list\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = [\"href\", \"label\"]\nconst _hoisted_7 = {\n  key: 1,\n  class: \"error\"\n}\nconst _hoisted_8 = { key: 0 }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (_ctx.data.panel_name)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createElementVNode(\"h1\", null, _toDisplayString(_ctx.data.panel_name), 1),\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"ul\", _hoisted_3, [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.data.treedata, (sw) => {\n                return (_openBlock(), _createElementBlock(\"li\", {\n                  key: sw.id,\n                  class: \"list-item\"\n                }, [\n                  _createElementVNode(\"a\", {\n                    class: _normalizeClass({active:_ctx.data.active===sw}),\n                    onClick: ($event: any) => (_ctx.dropdown(sw.sw_name))\n                  }, _toDisplayString(sw.sw_name), 11, _hoisted_4),\n                  (_ctx.data.active===sw.sw_name)\n                    ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sw.bottom_objs, (obj) => {\n                          return (_openBlock(), _createElementBlock(\"li\", {\n                            key: obj.id,\n                            class: \"sublist-item\"\n                          }, [\n                            _createElementVNode(\"a\", {\n                              href: obj.obj_url,\n                              label: obj.obj_name\n                            }, _toDisplayString(obj.obj_name), 9, _hoisted_6)\n                          ]))\n                        }), 128))\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ]))\n              }), 128))\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.data.error.title)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          (_ctx.data.error.title)\n            ? (_openBlock(), _createElementBlock(\"h1\", _hoisted_8, _toDisplayString(_ctx.data.error.title), 1))\n            : _createCommentVNode(\"\", true),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.data.error.message, (item) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              style: {\"text-align\":\"left\"},\n              key: item\n            }, [\n              _createTextVNode(_toDisplayString(item), 1),\n              _hoisted_9\n            ]))\n          }), 128))\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}","import axios from \"axios\";\r\nimport settings from '@/assets/settings.json';\r\n\r\ntype EndObj = {ENDOBJ_NM: string; ENDOBJ_SCAN: string;};\r\ntype Switch = {[key: string]: EndObj[];}; //key=SW_LBL\r\nexport async function getSparql(panel_fmid: string): Promise<[string, Switch, any]> {\r\n    try {\r\n        //SPARQLのbaseURLを取得\r\n        const baseUrl = settings.sparqlUrl;\r\n\r\n        const query = `\r\n            PREFIX brick: <https://brickschema.org/schema/Brick#>\r\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\r\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\r\n    \r\n            select distinct ?PANEL_NM, ?SW_LBL, ?ENDOBJ_NM, ?ENDOBJ_SCAN where{\r\n            #電灯盤取得\r\n            ?PANEL <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_c91c8dae_12f9_45ab_ac9e_35a81e8c9dc3> \"${panel_fmid}\"@ja. #FMID：検索キー\r\n            ?PANEL rdfs:label ?PANEL_NM.\r\n    \r\n            #電灯盤SW取得\r\n            ?PANEL brick:hasPart ?SW.\r\n            ?SW rdfs:label ?SW_NM.\r\n            ?SW <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_d7843f2a_8710_4d42_bbe7_20f29037fd8e> ?SW_MEMO. #※備考\r\n            ?SW <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_7dce3876_b400_4a5a_a6d4_e37c5f2f2a1d> ?SW_LBL. #★ラベル：水色ボタンに表示\r\n    \r\n            #回路取得\r\n            ?SW brick:feeds ?CIRC.\r\n            ?CIRC rdfs:label ?CIRC_NM.\r\n    \r\n            #末端オブジェクト取得\r\n            ?CIRC brick:feeds ?ENDOBJ.\r\n            ?ENDOBJ rdfs:label ?ENDOBJ_NM. #末端オブジェクト名称：白ボタンに表示\r\n            ?ENDOBJ <http://www.semanticweb.org/chensisi/ontologies/2022/9/untitled-ontology-163:OWLObjectProperty_cbdc3161_268f_4b71_8f71_5727436a50ba> ?ENDOBJ_SCAN. #3DスキャンURL：白ボタンにリンク埋め込み\r\n            }\r\n        `;\r\n        const url = baseUrl + '?query=' + encodeURIComponent(query);\r\n  \r\n        // APIを呼び出す\r\n        const response = await axios.get(url);\r\n\r\n        // 取得結果を設定（電灯盤SWをkeyとする、末端オブジェクトの配列を生成）\r\n        const resData:Switch = {};\r\n        let panel_name = '';\r\n        response.data.results.bindings.forEach((value:any) => {\r\n            if(!panel_name){\r\n                panel_name = value['PANEL_NM']['value'];\r\n            }\r\n\r\n            if(!(value['SW_LBL']['value'] in resData)){\r\n                resData[value['SW_LBL']['value']] = [];\r\n            }\r\n            resData[value['SW_LBL']['value']].push({ENDOBJ_NM: value['ENDOBJ_NM']['value'], ENDOBJ_SCAN: value['ENDOBJ_SCAN']['value']});\r\n        });\r\n\r\n        return [panel_name, resData, ''];\r\n    } catch (ex) {\r\n        return ['Error', {}, ex];\r\n    }\r\n}\r\n","\nimport { defineComponent, reactive } from 'vue';\nimport { getSparql } from '@/services/SparqlApiService';\nimport settings from '@/assets/settings.json';\n\n//参考HP\n//https://arrown-blog.com/vuejs-dropdownmenu/\n//https://tedate.jp/vue-js/how-to-changing-the-data-part-in-vue3\n\nexport default defineComponent({\n  name: 'Menu',\n  props: {\n    panel_fmid: String,\n    url_pathTop: String\n  },\n  setup(props){\n    const data = reactive({\n      panel_name:\"\",\n      treedata:[{}],//ボタンを表示する階層データ\n      active:\"\",\n      error: {\n        title:\"\",\n        message:[] as string[]\n      }\n    })\n\n    //画面に表示する階層構造のデータをセット\n    getSparql((props.panel_fmid) as string).then(([panel_name, sparqlData, ex]) => {\n      if (panel_name && panel_name !=='Error') {\n        data.panel_name = panel_name;\n\n        type bottom_obj = {obj_name: string; obj_url: string;};\n        const treedata:{sw_name: string; bottom_objs: bottom_obj[]}[] = [];\n\n        // key(電灯盤SW)単位で繰り返し、末端オブジェクトの配列を設定\n        Object.keys(sparqlData).forEach((key: string) => {\n          const bottom_objs:bottom_obj[] = [];\n          sparqlData[key].forEach((value: any) => {\n            bottom_objs.push(\n              {\n                obj_name: value['ENDOBJ_NM'],\n                obj_url: value['ENDOBJ_SCAN']\n              }\n            );\n          });\n          \n          treedata.push(\n            {\n              sw_name: key,\n              bottom_objs: bottom_objs\n            }\n          );\n        });\n\n        data.treedata = treedata;\n      } else if (!panel_name) {\n        data.error.title = settings.notFound.title;\n        settings.notFound.message.forEach((value:string) => {\n          data.error.message.push(value);\n        });\n        data.error.message.push('・エラーコード：E001');\n        data.error.message.push(`・URLパラメータ1：${props.url_pathTop}`);\n        data.error.message.push(`・FMID：${props.panel_fmid}`);\n      } else {\n        data.error.title = settings.dataException.title;\n        settings.dataException.message.forEach((value:string) => {\n          data.error.message.push(value);\n        });\n        data.error.message.push('・エラーコード：E002');\n        data.error.message.push(`・URLパラメータ1：${props.url_pathTop}`);\n        data.error.message.push(`・FMID：${props.panel_fmid}`);\n        data.error.message.push(`・内容：${ex}`);\n      }\n    });\n\n    //method\n    //https://tech.synapse.jp/entry/2022/08/15/113000\n    function dropdown(list:string) {\n        data.active = data.active===list ? \"\":list;\n    }\n    \n    return{\n      data,\n      dropdown\n    }\n  }\n});\n","import { render } from \"./Menu.vue?vue&type=template&id=1c4d59ea&scoped=true&ts=true\"\nimport script from \"./Menu.vue?vue&type=script&lang=ts\"\nexport * from \"./Menu.vue?vue&type=script&lang=ts\"\n\nimport \"./Menu.vue?vue&type=style&index=0&id=1c4d59ea&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Work\\\\事業開発（NavVis）\\\\pub_sdm_dialog_n\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1c4d59ea\"]])\n\nexport default __exports__","\nimport { defineComponent, reactive } from 'vue';\nimport Menu from '@/components/Menu.vue'; // @ is an alias to /src\nimport { useRoute } from 'vue-router'; \n\nexport default defineComponent({\n  name: 'Switch',\n  components: {\n    Menu,\n  },\n  setup(){\n    //data\n    const data = reactive({\n      panel_fmid:\"\",\n      url_pathTop:\"\"\n    })\n\n    //URLのパラメータの値を取得\n    //参考\n    //https://codelikes.com/use-vue-router/#toc4\n    //接続時のサンプルURL\n    //http://localhost:8080/switch/E_LB_105\n    const route = useRoute();\n    data.panel_fmid = (route.params.fmid) as string;\n    data.url_pathTop = \"switch\";\n\n    return{\n      data\n    }\n  }\n});\n","import { render } from \"./Switch.vue?vue&type=template&id=9e2f26e6&ts=true\"\nimport script from \"./Switch.vue?vue&type=script&lang=ts\"\nexport * from \"./Switch.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Work\\\\事業開発（NavVis）\\\\pub_sdm_dialog_n\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}